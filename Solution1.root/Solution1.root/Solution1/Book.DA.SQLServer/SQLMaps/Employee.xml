<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="Employee" xmlns="http://ibatis.apache.org/mapping"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <statements>
    <select id="select_operators" resultMap="EmployeeResult">
      select * from employee where employeeName='admin'
      order by IDNo asc
    </select>
    <select id="get_byName" parameterClass="string" resultMap="EmployeeResult">
      SELECT *
      FROM [dbo].[Employee]
      WHERE [EmployeeName] = #value#
      order by IDNo asc
    </select>

    <select id="getbyIdNo" parameterClass="string" resultMap="EmployeeResult">
      SELECT *
      FROM [dbo].[Employee]
      WHERE [IDNo] = #value#
      order by IDNo asc
    </select>
    <select id="SelectOnActive"  resultMap="EmployeeResult">
      select * from [dbo].[Employee]
      WHERE EmployeeLeaveDate is null or EmployeeLeaveDate=#value# order by IDNo
    </select>
    <select id="SelectLeaveJob"  resultMap="EmployeeResult">
      select * from [dbo].[Employee]
      WHERE EmployeeLeaveDate is not null and  EmployeeLeaveDate!=#value# order by IDNo
    </select>
   
    <select id="SelectbyIDsub"  resultMap="EmployeeResult">
      select * from  Employee where  substring(IDNo,1,1)=#value#  order by IDNo
    </select>
    <select id="select_by_roleId"  resultMap="EmployeeResult">
      select * from employee where employeeid in (select employeeid from operators where operatorsid in (select operatorsid from OperationRole where roleid in (select roleid from role where id = #value#))) order by IDNo
    </select>
    <select id="select_byDepartment"  resultMap="EmployeeResult">
      select * from employee where DepartmentId=#value# order by IDNo
    </select>
	  <select id="select_byCardId" resultMap="EmployeeResult" parameterClass="Map">
      select * from  employee where  CardNo=#cardno# AND (EmployeeLeaveDate IS NULL OR EmployeeLeaveDate>#dt#)
    </select>
 <select id="select_byPinYin" resultMap="EmployeeResult" parameterClass="string">
   select * from  employee where  PinYin=#value# order by IDNo
 </select>
    <select id="select_PinYin" resultMap="EmployeeResult" parameterClass="string">
      select pinyin from employee group by pinyin
    </select>

    <select id="select_leaverPayActive" resultMap="EmployeeResult" parameterClass="string">
      select dutyPay, IDNo ,employeeId,employeeName,DepartmentId ,employeeLeaveDate from employee  where month(employeeLeaveDate)=month(getdate()) and year(employeeLeaveDate)=year(getdate())
    </select>

    <select id ="select_EmployeeSearch0" resultMap="EmployeeResult" parameterClass="Map">
      SELECT * FROM Employee  WHERE (EmployeeJoinDate BETWEEN #rzbegin# AND #rzend#) AND (EmployeeLeaveDate IS NULL or EmployeeLeaveDate='1900-01-01')
    </select>

    <select id ="select_EmployeeSearch1" resultMap="EmployeeResult" parameterClass="string">
      SELECT * FROM Employee WHERE (employeeleavedate BETWEEN #lzbegin# AND #lzend#) AND EmployeeLeaveDate IS NOT NULL
    </select>

    <select id ="select_EmployeeSearch2" resultMap="EmployeeResult" parameterClass="string">
      SELECT * FROM Employee  WHERE (EmployeeJoinDate BETWEEN #rzbegin# AND #rzend#) AND (employeeleavedate BETWEEN #lzbegin# AND #lzend#)
    </select>

    <select id ="select_EmployeeSearch3" resultMap="EmployeeResult">
      SELECT * FROM Employee
    </select>
    
  </statements>
</sqlMap>