<?xml version="1.0" encoding="utf-8" ?> 
<sqlMap namespace="CustomerProcessingDetail" xmlns="http://ibatis.apache.org/mapping" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <resultMaps>                                    
        <resultMap id="CustomerProcessingDetailResult1" class="CustomerProcessingDetail">
			<result property="CustomerProcessingDetailId" column="CustomerProcessingDetailId" />
			<result property="ProcessCategoryId" column="ProcessCategoryId" />
			<result property="ProcessId" column="ProcessId" />
			<result property="Description" column="Description" />
			<result property="CustomerProcessingId" column="CustomerProcessingId" />
      <result property="ProductName" column="ProductName" />
		<result property="CustomerProcessing" column="CustomerProcessingId" lazyLoad="false" select="CustomerProcessing.select_by_primary_key" />		<result property="ProcessCategory" column="ProcessCategoryId" lazyLoad="false" select="ProcessCategory.select_by_primary_key" />		<result property="Process" column="ProcessId" lazyLoad="false" select="Processing.select_by_primary_key" />
        </resultMap>
    </resultMaps>
  
  
  <statements>
    <select id="selectbyhead" resultMap="CustomerProcessingDetailResult">
      <![CDATA[
      select * from CustomerProcessingDetail where CustomerProcessingId = #value#
      ]]>
    </select>
    <select id="selectbybomid" resultMap="CustomerProcessingDetailResult1">
      <![CDATA[      
SELECT ProductName,a.* FROM CustomerProcessingDetail a LEFT JOIN product b ON a.CustomerProcessingId= b.CustomerProcessingId WHERE a.CustomerProcessingId
in(SELECT CustomerProcessingId FROM Product WHERE ProductId in 
      (select productid from BomComponentInfo where bomid=#value#))
      ]]>
    </select>
  </statements>
</sqlMap>