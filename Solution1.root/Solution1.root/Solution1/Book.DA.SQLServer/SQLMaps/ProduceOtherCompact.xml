<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="ProduceOtherCompact" xmlns="http://ibatis.apache.org/mapping"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <statements>
    <select id="selectIsInDepot" resultMap="ProduceOtherCompactResult">
      <![CDATA[
      SELECT * FROM ProduceOtherCompact WHERE ProduceOtherCompactId IN( SELECT ProduceOtherCompactId FROM ProduceOtherCompactDetail WHERE OtherCompactCount-isnull(InDepotCount,0)>0)
      ]]>
    </select>

    <select id="selectIsInDepotMaterial"  resultMap="ProduceOtherCompactResult">
      SELECT * FROM ProduceOtherCompact WHERE ProduceOtherCompactId IN (SELECT ProduceOtherCompactId FROM ProduceOtherCompactMaterial WHERE ProduceQuantity-isnull(AlreadyOutQuantity,0)>0)
    </select>
	  <select id="selectByMRSHeaderId" resultMap="ProduceOtherCompactResult" parameterClass="string">
		  select * from dbo.ProduceOtherCompact where MRSHeaderId=#value#
	  </select>


    <select id="Select_ThreeMaths" resultMap="ProduceOtherCompactResult" parameterClass="string">
         <![CDATA[
      SELECT * FROM ProduceOtherCompact WHERE (InvoiceMaterialFlag<>2 or InvoiceMaterialFlag is null) and ProduceOtherCompactDate>=DateAdd(Month,-3,getdate()) order by ProduceOtherCompactId desc
       		]]>
    </select>
    <select id="select_GetToDate" resultMap="ProduceOtherCompactResult" parameterClass="string">
      <![CDATA[
      SELECT * FROM ProduceOtherCompact WHERE (InvoiceMaterialFlag<>2 or InvoiceMaterialFlag is null) and ProduceOtherCompactDate between #startdate# and #enddate# order by ProduceOtherCompactId desc
      ]]>
    </select>
  </statements>
</sqlMap>