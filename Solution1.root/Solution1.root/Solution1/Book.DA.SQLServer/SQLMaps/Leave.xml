<?xml version="1.0" encoding="utf-8" ?> 
<sqlMap namespace="Leave" xmlns="http://ibatis.apache.org/mapping" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <!-- select by primary key -->
  <statements>
  <select id="select_byempiddate" resultMap="LeaveResult" parameterClass="Map">
    SELECT
    [LeaveId],
    [LeaveTypeId],
    [EmployeeId],
    [LeaveDate],
    [LeaveRange],
    [LeaveText]
    FROM
    [dbo].[Leave]
    where [EmployeeId]=#empid# and  ([LeaveDate] between #startdate# and #enddate#)
    order by [LeaveDate] asc
  </select>
  <select id="select_SpecificHolidayMonthEmp" resultClass="int" parameterClass="Map">
  <![CDATA[  SELECT count(DutyDate) FROM HrDailyEmployeeAttendInfo WHERE EmployeeId =#employeeId# AND YEAR(DutyDate) = #year# AND MONTH(DutyDate) =#month# AND  convert(varchar(2), month(DutyDate))+'/'+ convert(varchar(2),day(DutyDate)) in (SELECT holidaydate  FROM HrSpecificHoliday)
  ]]>
  </select>

    <select id="select_byempidmonth" resultMap="LeaveResult" parameterClass="Map">
      select e.employeeName ,lt.leaveTypeName ,l.* from Leave l inner join Employee e on l.employeeId=e.employeeId inner join LeaveType  lt on l.LeaveTypeId=lt.LeaveTypeId where l.employeeId=#employeeId# and month(LeaveDate)=#month# and year(LeaveDate)=#year#
    </select>
  </statements>
</sqlMap>